---
title: "Descripción de Datos"
author: "Andrés Martínez"
date: "19 6 2019"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Introducción a `ggplot2`

El paquete `ggplot2` es el mejor paquete para hacer gráficas en R. Es el más completo y versátil pues permite personalizar todos los aspectos de las gráficas. En este paquete se hacen gráficas por capas. 

* La primera capa indica a R que cree la "plantilla"" de la gráfica, y los datos que se utilizarán.

* La siguiente capa indica el tipo de gráfica, y las características de esa gráfica, incluyendo las variables a graficar.

```{r ,echo=FALSE,message=FALSE,warning=FALSE}
library("ggplot2")
library("plyr")
library("dplyr")
library("gridExtra")# grid arrange
library("plm") # panel data models
library("maps")# Mapas
library("moments")# Momentos
library("reshape2")
library("ggthemes")
library("ggplot2movies")# Data movies
```

El paquete ggplot2 en R es una implementación de La gramática de los gráficos como lo describe Leland Wilkinson en su libro. El paquete fue escrito originalmente por Hadley Wickham cuando era un estudiante graduado en la Universidad Estatal de Iowa (todavía mantiene activamente el paquete). El paquete implementa lo que podría considerarse un tercer sistema de gráficos para R (junto con la base de gráficos y celosía). El paquete está disponible desde CRAN54 a través de install.packages (); La última versión de la fuente se puede encontrar en el Repositorio GitHub del paquete55. La documentación del paquete se puede encontrar en http://docs.ggplot2.org/current/56.

La gramática de los gráficos representa una abstracción de ideas y objetos gráficos. Puedes pensar en esto como en el desarrollo de verbos, sustantivos y adjetivos para gráficos de datos. El desarrollo de tal gramática permite una "teoría" de gráficos sobre la cual construir nuevos gráficos y objetos gráficos. Para citar el libro de Hadley Wickham sobre ggplot2, queremos "acortar la distancia de la mente a la página". En resumen,
”... la gramática nos dice que un gráfico estadístico es un mapeo de datos a atributos estéticos (color, forma, tamaño) de objetos geométricos (puntos, líneas, barras). La gráfica también puede contener transformaciones estadísticas de los datos y se dibuja en un sistema de coordenadas específico "- del libro ggplot2

Podría preguntarse: “¿Por qué necesitamos una gramática de gráficos?” Bueno, por muchas razones, el hecho de tener una gramática es útil para los idiomas hablados. La gramática permite un resumen más compacto de los componentes básicos de un idioma y nos permite ampliar el lenguaje y manejar situaciones que no hemos visto antes.

Si piensa hacer una gráfica con el sistema de gráficos base, la gráfica se construye llamando a una serie de funciones que crean o anotan una gráfica. No hay una forma convenida para describir la trama, excepto para simplemente recitar la serie de funciones R que fueron llamadas para crear la cosa en primer lugar. En un capítulo anterior, describimos el sistema de trazado de la base como un tipo de modelo de "paleta de artista", donde se comienza con un "lienzo" en blanco y se construye a partir de ahí.

```{r A,fig.cap="Primer Gráfico", fig.width = 8, fig.height = 8,echo=FALSE, message=FALSE,warning=FALSE}

A = c(6,4,3,1)
name = c("0<50k","50k<100k","100k<150k","150k<200k")
df = data.frame(A,name)
colnames(df)=c("x","name")
g1 = ggplot(df) + geom_col(aes(x=name,y=x)) + labs(x="Numbers of Copies Sold",y="Number of Books",title="Independent Textbook Publishing, Inc.",subtitle=" Distribution of Copies Sold",caption="",fill="")
g1
```







```{r B,fig.cap="Segundo Gráfico", fig.width = 8, fig.height = 8,echo=FALSE, message=FALSE,warning=FALSE}

B = matrix(c(703,337),nrow=1)
name1 = c("Social Sciences","Business")
df1 = data.frame(x=t(B),y=name1)
colnames(df1) = c("x","name")

g2 = ggplot(df1,las=2) + geom_col(aes(x=name,y=x)) + labs(x="Total Copies Sold",y="Market Classification",title="Total Copies Sold by Market Class",subtitle=" ",caption="",fill="") + coord_flip() + theme(axis.text.y=element_text(angle=90,hjust=1,vjust=0.5))
g2

```


```{r C,fig.cap="Tercer Gráfico", fig.width = 8, fig.height = 8,echo=FALSE, message=FALSE,warning=FALSE}


grid.arrange(g1,g2, ncol = 2)

```


```{r D,fig.cap="Cuarto Gráfico", fig.width = 8, fig.height = 8,echo=FALSE, message=FALSE,warning=FALSE}
data(mpg)
#Mostrar la basa con head 
a = ggplot(mpg,aes(x=hwy))
a + geom_area(stat="bin",binwidth=5)
a + geom_dotplot(binwidth=0.5)
a + geom_histogram(binwidth=1)
a + geom_density(kernel="gaussian")
a + stat_density(adjust=1,kernel="gaussian")
```

```{r E,fig.cap="Quinto Gráfico", fig.width = 8, fig.height = 8,echo=FALSE, message=FALSE,warning=FALSE}

b = ggplot(mpg,aes(fl))
b + geom_bar()
n = b + geom_bar(aes(fill=fl))
n
n + scale_fill_brewer()
n + scale_fill_grey()

```


```{r F,fig.cap="Sexto Gráfico", fig.width = 8, fig.height = 8,echo=FALSE, message=FALSE,warning=FALSE}

s = ggplot(mpg, aes(fl,fill=drv))
s + geom_bar(position="dodge")
s + geom_bar(position=position_dodge(width=2))
s + geom_bar(position="fill")
s + geom_bar(position="stack")

```

```{r G,fig.cap="Septimo Gráfico", fig.width = 5, fig.height = 5,echo=FALSE, message=FALSE,warning=FALSE}

t = ggplot(mpg,aes(x="",fill=factor(fl))) + geom_bar(width = 1)
t + coord_polar(theta = "y")


```

## Dos variables

```{r H,fig.cap="Primer Gráfico", fig.width = 5, fig.height = 5,echo=FALSE, message=FALSE,warning=FALSE}

# CONTINUOUS X, CONTINUOUS Y
f = ggplot(mpg, aes(x=cty, y=hwy))
f + geom_point()
f + geom_point(position="jitter")
f + geom_jitter()
f + geom_point() + geom_quantile(quantiles=c(0.25,0.5,0.75))
```


```{r I,fig.cap="Segundo Gráfico", fig.width = 5, fig.height = 5,echo=FALSE, message=FALSE,warning=FALSE}


q = f + geom_point(aes(size=cyl)); 
q
q + scale_size_area(max_size=3)



```




```{r J,fig.cap="Tercer Gráfico", fig.width = 5, fig.height = 5,echo=FALSE, message=FALSE,warning=FALS}

data("economics")
j = ggplot(economics, aes(x=date,y=unemploy))
j + geom_area()
j + geom_line()
j + geom_step()

```



```{r K,fig.cap="Tercer Gráfico", fig.width = 5, fig.height = 5,echo=FALSE, message=FALSE,warning=FALS}



```

